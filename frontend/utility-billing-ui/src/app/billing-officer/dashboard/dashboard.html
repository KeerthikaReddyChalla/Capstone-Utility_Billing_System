<div class="analytics-page">

  <!-- HEADER -->
  <div class="page-header">
    <div>
      <h2>Bills & Analytics</h2>
      <p class="subtitle">
        Billing officer operational dashboard
      </p>
    </div>
  </div>

  <!-- STATS -->
  <div class="stats-grid">
    <div class="stat-card">
      <span>Total Bills</span>
      <h3>{{ stats.totalBills }}</h3>
    </div>

    <div class="stat-card warn">
      <span>Pending</span>
      <h3>{{ stats.pending }}</h3>
    </div>

    <div class="stat-card danger">
      <span>Overdue</span>
      <h3>{{ stats.overdue }}</h3>
    </div>

    <div class="stat-card success">
      <span>Total Consumption</span>
      <h3>{{ stats.totalConsumption }} <small>units</small></h3>
    </div>
  </div>

  <!-- CHARTS -->
  <div class="charts-grid">

  <div class="chart-card wide">
    <h4>Consumption Trend</h4>

    <div class="chart-wrapper">
      <canvas id="consumptionChart"></canvas>
    </div>
  </div>

  <div class="chart-card wide">
    <h4>Utility-wise Consumption</h4>

    <div class="chart-wrapper">
      <canvas id="utilityChart"></canvas>
    </div>
  </div>

</div>


  <!-- BILLS TABLE -->
  <div class="table-card">
    <h4>Generated Bills</h4>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Bill ID</th>
            <th>Consumer</th>
            <th>Utility</th>
            <th>Units</th>
            <th>Amount</th>
            <th>Cycle</th>
            <th>Status</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let bill of bills">
            <td class="mono">{{ bill.id | slice:0:8 }}</td>
            <td>{{ bill.consumerName }}</td>
            <td>{{ bill.utilityName }}</td>
            <td>{{ bill.unitsConsumed }}</td>
            <td class="amount">â‚¹ {{ bill.amount }}</td>
            <td>{{ bill.billingCycle | date:'MMM yyyy' }}</td>
            <td>
              <span
                class="status-badge"
                [ngClass]="bill.status.toLowerCase()"
              >
                {{ bill.status }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>

</div>
